(this["webpackJsonplazy-island-planner"]=this["webpackJsonplazy-island-planner"]||[]).push([[0],{1:function(e){e.exports=JSON.parse('{"squareSize":8,"squarePerBlock":16,"mapPadding":50,"mapXBlock":7,"mapYBlock":6,"colorBg":"rgb(119, 214, 194)","colorGrid":"rgba(255, 255, 255, 0.2)","colorMainGrid":"rgba(255, 255, 255, 0.4)","colorGridMark":"#2f9b8b","imgWidth":1280,"imgHeight":720,"sampleStartX":354,"sampleStartY":117,"sampleEndX":953,"sampleEndY":630,"hideDist":500,"strokeColorBilding":"#00baff","strokeColorPlant":"#00ff48"}')},11:function(e,t,a){e.exports=a.p+"static/media/test.5da2d115.jpg"},23:function(e,t,a){e.exports=a(38)},28:function(e,t){},30:function(e,t){},31:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var o=a(13),r=a(14),i=a(5),n=a(21),s=a(20),l=a(0),c=a.n(l),m=a(15),u=a.n(m),d=a(2),h=a.n(d),g=a(1),p=a(6);var v=function(e){var t,a=e.data.mode||e.data.tool||e.data.item||e.data.colorName,o=e.isActive?"active":"";if(t=e.data.colorName?"color ".concat(e.data.colorName," ").concat(o):e.data.item?"item ".concat(e.type," ").concat(e.data.item," ").concat(o):"".concat(e.type," ").concat(o),e.data.image){if("colorCustom"===a)return c.a.createElement("button",{id:a,onClick:e.onClick,className:t},c.a.createElement("label",null,c.a.createElement("input",{type:"color",defaultValue:e.customColor,onChange:e.changeColor}),c.a.createElement("img",{alt:a,src:"/lazy-island-planner/"+e.data.image})));if("tree"===e.type){var r={background:e.data.color};return c.a.createElement("button",{id:a,onClick:e.onClick,className:t,style:r},c.a.createElement("img",{alt:a,src:"/lazy-island-planner/"+e.data.image}))}return c.a.createElement("button",{id:a,onClick:e.onClick,className:t},c.a.createElement("img",{alt:a,src:"/lazy-island-planner/"+e.data.image}))}var i={background:"flower"===e.type?e.data.item:e.data.color};return c.a.createElement("button",{id:a,onClick:e.onClick,className:t},c.a.createElement("div",{className:"colorBlock",style:i}))};var f=function(e){var t=e.toolData.map((function(t,a){return c.a.createElement("li",{key:a},c.a.createElement(v,{data:t,type:"mode",isActive:e.currentMode===t.mode,onClick:e.onClick}))}));return c.a.createElement("ul",null,t)};var y=function(e){var t=e.currentModeData.tools.map((function(t,a){return c.a.createElement("li",{key:a},c.a.createElement(v,{data:t,type:"tool",isActive:e.currentTool===t.tool,onClick:e.onClick}))}));return c.a.createElement("ul",null,t)};var b=function(e){var t,a,o=e.currentTool;"draw"===e.currentMode?(t=e.currentModeData.colors,a="colorName"):(t=e.currentModeData.tools.find((function(t){if(t.tool===e.currentTool)return t})).items,a="item");var r=t.map((function(t,r){return c.a.createElement("li",{key:r},c.a.createElement(v,{data:t,type:o,isActive:t[a]===e.currentItem,onClick:e.onClick,customColor:e.customColor,changeColor:e.changeColor}))}));return c.a.createElement("div",{className:"menuItems"},c.a.createElement("hr",null),c.a.createElement("ul",null,r))},S=a(11),z=a.n(S),k=a(7),w=a(39),C=a(8),E=a(16);k.a.use(E.a).use(C.f).init({resources:{"zh-TW":{translation:{"This is a simple tool for Animal Crossing":"\u9019\u662f\u4e00\u500b\u7d66\u61f6\u4eba\u7528\u7684\u300a\u96c6\u5408\u5566\uff01\u52d5\u7269\u68ee\u53cb\u6703\u300b\u5cf6\u5dbc\u898f\u5283\u5de5\u5177\u3002","Upload your map screenshot to start":"\u4e0a\u50b3\u4f60\u64f7\u53d6\u7684\u5cf6\u5dbc\u5730\u5716\u756b\u9762\uff08\u5982\u4e0b\u5716\uff09\u5373\u53ef\u958b\u59cb\uff0c","or you can":"\u4e5f\u53ef\u4ee5","try with my map":"\u5148\u7528\u6211\u7684\u5730\u5716\u8a66\u8a66\u770b",period:"\u3002","Upload image":"\u4e0a\u50b3\u5716\u6a94",or:"\u6216","Use the URL of uploaded image":"\u4f7f\u7528\u5df2\u4e0a\u50b3\u7684\u5716\u7247\u9023\u7d50\uff1a",Confirm:"\u78ba\u5b9a","Sorry this seems not a correct map image":"\u62b1\u6b49\uff0c\u9019\u597d\u50cf\u4e0d\u662f\u6b63\u78ba\u7684\u5730\u5716\u622a\u5716\u6545\u7121\u6cd5\u4f7f\u7528\u3002","Sorry this seems not a correct map image url":"\u62b1\u6b49\uff0c\u9019\u597d\u50cf\u4e0d\u662f\u6b63\u78ba\u7684\u5730\u5716\u622a\u5716\u9023\u7d50\u3002\u53ef\u5728\u5716\u7247\u4e0a\u6309\u53f3\u9375\u300c\u8907\u88fd\u5716\u7247\u4f4d\u5740\u300d\u518d\u8cbc\u4e0a\u3002",info:"\u8aaa\u660e\u9801","download map":"\u4e0b\u8f09\u5730\u5716","This is a very simple tool":"\u9019\u662f\u500b\u529f\u80fd\u975e\u5e38\u967d\u6625\u7684\u61f6\u4eba\u5de5\u5177\uff0c","No undo":"\u6c92\u6709\u56de\u5fa9\u529f\u80fd\uff0c\u53ea\u80fd\u91cd\u65b0\u6574\u7406\u56de\u5230\u958b\u59cb\u756b\u9762\u8b80\u53d6\u6a94\u6848\u5f9e\u982d\u518d\u4f86\uff1b","No save":"\u4e5f\u4e0d\u80fd\u5132\u5b58\u7de8\u8f2f\u5230\u4e00\u534a\u7684\u72c0\u614b\uff0c\u53ea\u80fd\u628a\u6210\u54c1\u4e0b\u8f09\u6210\u5716\u6a94\u3002","You can try other great tools":"\u5982\u679c\u4f60\u89ba\u5f97\u9019\u500b\u7834\u5de5\u5177\u5f88\u96e3\u7528\uff0c\u53ef\u4ee5\u8a66\u8a66\u770b\u5176\u4ed6\u5c08\u696d\u958b\u767c\u8005\u505a\u7684\u9ad8\u7d1a\u5de5\u5177\uff1a",Close:"\u95dc\u9589"}},en:{translation:{"This is a simple tool for Animal Crossing":'This is a simple island planning tool for "Animal Crossing: New Horizons."',"Upload your map screenshot to start":"Upload the screenshot of your island map (like the image below\uff09to start,","or you can":"or you can ","try with my map":"try with my map",period:".","Upload image":"Upload image",or:"Or","Use the URL of uploaded image":"Use the URL of your uploaded image:",Confirm:"Confirm","Sorry this seems not a correct map image":"Sorry, this seems not a correct map image.","Sorry this seems not a correct map image url":'Sorry, this seems not a correct map image URL. You can right click the image then "Copy Image Address."',Info:"Info","Download map":"Download map","This is a very simple tool":"This is a very simple tool. ","No undo":'"No undo feature." You can only reload the page and start from the beginning. ',"No save":'Also, "No save feature." You can only download the image file.',"You can try other great tools":"If this tool is too lame for you, you can try these great tools that made by skilled developers:",Close:"Close"}},ja:{translation:{"This is a simple tool for Animal Crossing":"\u3053\u308c\u306f\u30b7\u30f3\u30d7\u30eb\u306a\u300c\u3042\u3064\u307e\u308c \u3069\u3046\u3076\u3064\u306e\u68ee\u300d\u306e\u5cf6\u306e\u69cb\u60f3\u30c4\u30fc\u30eb\u3067\u3059\u3002","Upload your map screenshot to start":"\u81ea\u5206\u306e\u5cf6\u306e\u5730\u56f3\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\uff08\u4e0b\u56f3\u306e\u3088\u3046\u306a\uff09\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002","or you can":"\u305d\u308c\u3068\u3082","try with my map":"\u4e0b\u56f3\u306e\u5730\u56f3\u3067\u4f53\u9a13\u3057\u3066\u307f\u308b",period:"\u3002","Upload image":"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9",or:"\u307e\u305f\u306f","Use the URL of uploaded image":"SNS\u306b\u6295\u7a3f\u3057\u305f\u753b\u50cf\u306eURL\u3092\u4f7f\u7528\uff1a",Confirm:"\u78ba\u5b9a","Sorry this seems not a correct map image":"\u3059\u307f\u307e\u305b\u3093\u3001\u3053\u308c\u306f\u6b63\u3057\u3044\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u3067\u306f\u306a\u3055\u305d\u3046\u3067\u3059\u3002","Sorry this seems not a correct map image url":"\u3059\u307f\u307e\u305b\u3093\u3001\u3053\u308c\u306f\u6b63\u3057\u3044URL\u3067\u306f\u306a\u3055\u305d\u3046\u3067\u3059\u3002\u753b\u50cf\u306b\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c\u753b\u50cf\u306eURL\u3092\u30b3\u30d4\u30fc\u300d\u3057\u3066\u304f\u3060\u3055\u3044\u3002",info:"\u8aac\u660e","download map":"\u5730\u56f3\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","This is a very simple tool":"\u3053\u308c\u306f\u3068\u3066\u3082\u30b7\u30f3\u30d7\u30eb\u306a\u30c4\u30fc\u30eb\u3067\u3059\u3002","No undo":"\u5143\u306b\u623b\u3059\u6a5f\u80fd\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u30ea\u30ed\u30fc\u30c9\u3057\u3066\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3059\u3057\u304b\u3067\u304d\u307e\u305b\u3093\u3002","No save":"\u30bb\u30fc\u30d6\u6a5f\u80fd\u3082\u3042\u308a\u307e\u305b\u3093\u3002\u753b\u50cf\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u304b\u3067\u304d\u307e\u305b\u3093\u3002","You can try other great tools":"\u3082\u3057\u3088\u308a\u672c\u683c\u7684\u306a\u30c4\u30fc\u30eb\u3092\u4f7f\u3044\u305f\u3044\u306a\u3089\u3001\u512a\u79c0\u306a\u958b\u767a\u8005\u304c\u4f5c\u3063\u305f\u3053\u3061\u3089\u306e\u30c4\u30fc\u30eb\u3092\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff1a",Close:"\u9589\u3081\u308b"}}},fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});k.a,a(31);var P=function(e){Object(n.a)(a,e);var t=Object(s.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).canvas=c.a.createRef(),r.urlInput=c.a.createRef(),r.upLoadImg=r.upLoadImg.bind(Object(i.a)(r)),r.loadMapFromUrl=r.loadMapFromUrl.bind(Object(i.a)(r)),r.downLoadCanvas=r.downLoadCanvas.bind(Object(i.a)(r)),r.changeMode=r.changeMode.bind(Object(i.a)(r)),r.changeTool=r.changeTool.bind(Object(i.a)(r)),r.changeItem=r.changeItem.bind(Object(i.a)(r)),r.changeColor=r.changeColor.bind(Object(i.a)(r)),r.state={language:k.a.language,isImgUploaded:!1,canvasSizeX:g.squareSize*g.squarePerBlock*g.mapXBlock+2*g.mapPadding,canvasSizeY:g.squareSize*g.squarePerBlock*g.mapYBlock+2*g.mapPadding,squareSize:g.squareSize,currentMode:p.toolData[0].mode,currentModeData:p.toolData[0],currentTool:p.toolData[0].tools[0].tool,currentItem:p.toolData[0].colors[0].colorName,customColor:p.toolData[0].colors[p.toolData[0].colors.length-1].color[0]},r}return Object(r.a)(a,[{key:"changeLanguage",value:function(e){e.target.parentElement.querySelectorAll("button").forEach((function(e){e.classList.remove("active")})),e.target.classList.add("active"),k.a.changeLanguage(e.target.name)}},{key:"componentDidUpdate",value:function(e){h.a.project&&("draw"===this.state.currentMode?this.handleDraw():"build"!==this.state.currentMode&&"plant"!==this.state.currentMode||!this.state.currentItem||this.handleBuildAndPlant())}},{key:"upLoadImg",value:function(e){var t,a=e.target.nextElementSibling,o=a.innerHTML;t=e.target.value.split("\\").pop(),a.innerHTML=t||o;var r=e.target.files[0],i=new FileReader,n=this;if(r){var s=new Image;s.src=window.URL.createObjectURL(r),s.addEventListener("load",(function(){var e=document.getElementById("img-input-error");if(s.width!==g.imgWidth||s.height!==g.imgHeight)return e.classList.add("active"),!1;i.readAsDataURL(r)}))}i.addEventListener("load",(function(){n.setState({isImgUploaded:!0}),n.renderMap(i.result)}),!1)}},{key:"loadMapFromUrl",value:function(e){var t,a=this;t="mapUseDefault"===e.target.id?z.a:this.urlInput.current.value,fetch(t).then((function(e){return e.blob()})).then((function(e){if(e.type.includes("image/jpeg")){var o=new Image;o.src=t,o.addEventListener("load",(function(){var t=document.getElementById("url-error");if(o.width!==g.imgWidth||o.height!==g.imgHeight)return t.classList.add("active"),!1;var r=new FileReader;r.readAsDataURL(e),r.addEventListener("load",(function(){a.setState({isImgUploaded:!0}),a.renderMap(r.result)}),!1)}))}else{document.getElementById("url-error").classList.add("active")}}))}},{key:"openModal",value:function(){document.body.classList.add("modal-open")}},{key:"closeModal",value:function(){document.body.classList.remove("modal-open")}},{key:"downLoadCanvas",value:function(){var e=this.canvas.current.toDataURL("image/jpg"),t=document.createElement("a");t.href=e,t.download="myIslandImg.jpg",document.body.appendChild(t),t.click()}},{key:"renderMap",value:function(e){var t=this,a=this.canvas.current;a.width=this.state.canvasSizeX,a.height=this.state.canvasSizeY,h.a.setup(a);var o=new h.a.Raster(e),r=new h.a.Layer;r.name="mapLayer",(new h.a.Layer).name="drawLayer",(new h.a.Layer).name="buildLayer",r.activate(),new h.a.Shape.Rectangle({x:0,y:0,width:this.state.canvasSizeX,height:this.state.canvasSizeY}).fillColor=g.colorBg,o.onLoad=function(){r.activate();var e=g.sampleEndX-g.sampleStartX,a=g.sampleEndY-g.sampleStartY,i=o.getSubRaster(new h.a.Rectangle(g.sampleStartX,g.sampleStartY,e,a));o.remove(),i.visible=!1,i.size=new h.a.Size(g.squarePerBlock*g.mapXBlock,g.squarePerBlock*g.mapYBlock);for(var n=0;n<i.height;n++)for(var s=0;s<i.width;s++){var l=i.getPixel(s,n);new h.a.Shape.Rectangle({x:s*t.state.squareSize+g.mapPadding,y:n*t.state.squareSize+g.mapPadding,width:t.state.squareSize,height:t.state.squareSize}).fillColor=l}},this.renderGrid(),this.componentDidUpdate()}},{key:"renderGrid",value:function(){var e,t=new h.a.Layer;t.name="gridLayer",t.activate();for(var a=[this.state.squareSize+5,this.state.squareSize-2],o=0;o<=g.squarePerBlock*g.mapXBlock;o++)o%g.squarePerBlock===0?((e=new h.a.Path.Line(new h.a.Point(o*this.state.squareSize+g.mapPadding-.5,0),new h.a.Point(o*this.state.squareSize+g.mapPadding-.5,this.state.canvasSizeY))).strokeWidth=3,e.dashArray=a,e.strokeColor=g.colorMainGrid):(e=new h.a.Path.Line(new h.a.Point(o*this.state.squareSize+g.mapPadding-.5,g.mapPadding),new h.a.Point(o*this.state.squareSize+g.mapPadding-.5,this.state.canvasSizeY-g.mapPadding))).strokeColor=g.colorGrid,e.locked=!0;for(var r=0;r<=g.squarePerBlock*g.mapYBlock;r++)r%g.squarePerBlock===0?((e=new h.a.Path.Line(new h.a.Point(0,r*this.state.squareSize+g.mapPadding-.5),new h.a.Point(this.state.canvasSizeX,r*this.state.squareSize+g.mapPadding-.5))).strokeWidth=3,e.dashArray=a,e.strokeColor=g.colorMainGrid):(e=new h.a.Path.Line(new h.a.Point(g.mapPadding,r*this.state.squareSize+g.mapPadding-.5),new h.a.Point(this.state.canvasSizeX-g.mapPadding,r*this.state.squareSize+g.mapPadding-.5))).strokeColor=g.colorGrid,e.locked=!0;for(var i=0;i<g.mapYBlock;i++){var n=new h.a.PointText(new h.a.Point(g.mapPadding/5,this.state.squareSize*g.squarePerBlock*(i+.5)+g.mapPadding));n.fillColor=g.colorGridMark,n.fontSize=2*this.state.squareSize,n.content=String.fromCharCode(65+i),n.fontWeight="bold"}for(var s=0;s<g.mapXBlock;s++){var l=new h.a.PointText(new h.a.Point(this.state.squareSize*g.squarePerBlock*(s+.5)+g.mapPadding,this.state.squareSize*g.squarePerBlock*g.mapYBlock+1.8*g.mapPadding));l.fillColor=g.colorGridMark,l.fontSize=2*this.state.squareSize,l.content=s+1,l.fontWeight="bold"}}},{key:"changeMode",value:function(e){var t,a=e.target.closest("button").getAttribute("id"),o=p.toolData.find((function(e){if(e.mode===a)return e}));t="draw"===a?o.colors[0].colorName:o.tools[0].items[0].item,this.setState({currentMode:a,currentModeData:o,currentTool:o.tools[0].tool,currentItem:t}),this.clearBrushHover(),this.clearNotBuiltItem()}},{key:"changeTool",value:function(e){var t=e.target.closest("button").getAttribute("id"),a=this.state.currentItem;"draw"!==this.state.currentMode&&(a=this.state.currentModeData.tools.find((function(e){if(e.tool===t)return e})).items[0].item);this.setState({currentTool:t,currentItem:a}),this.clearNotBuiltItem()}},{key:"changeItem",value:function(e){var t=e.target.closest("button").getAttribute("id");this.setState({currentItem:t}),this.clearNotBuiltItem()}},{key:"changeColor",value:function(e){this.setState({customColor:e.target.value})}},{key:"isEditableArea",value:function(e){return e.x>g.mapPadding&&e.x<this.state.squareSize*g.squarePerBlock*g.mapXBlock+g.mapPadding&&e.y>g.mapPadding&&e.y<this.state.squareSize*g.squarePerBlock*g.mapYBlock+g.mapPadding}},{key:"handleDraw",value:function(){var e=this;h.a.project.layers.buildLayer.children.forEach((function(e){e.children.deletBtn.opacity=0})),h.a.project.layers.drawLayer.activate();var t,a,o=new h.a.Tool;o.activate();var r=this.state.currentModeData.tools.find((function(t){if(t.tool===e.state.currentTool)return t}));if(t=r.size?r.size:0,"colorCustom"===this.state.currentItem)a=[this.state.customColor];else{var i=this.state.currentModeData.colors.find((function(t){if(t.colorName===e.state.currentItem)return t}));a=i.color}var n=(t-1)*g.squareSize;if(h.a.project.activeLayer.children.brush){if(h.a.project.activeLayer.children.brush.width/this.state.squareSize!==t){h.a.project.activeLayer.children.brush.remove();var s=new h.a.Shape.Rectangle({x:-1*g.hideDist,y:-1*g.hideDist,width:t*this.state.squareSize,height:t*this.state.squareSize});s.fillColor="rgba(255,255,255,0.1)",s.strokeColor="rgba(255,255,255,0.8)",s.name="brush"}}else{var l=new h.a.Shape.Rectangle({x:-1*g.hideDist,y:-1*g.hideDist,width:t*this.state.squareSize,height:t*this.state.squareSize});l.fillColor="rgba(255,255,255,0.1)",l.strokeColor="rgba(255,255,255,0.8)",l.name="brush"}var c=h.a.project.activeLayer.children.brush;o.onMouseMove=function(a){var o=new h.a.Point;o.x=a.point.x-(a.point.x-g.mapPadding)%e.state.squareSize-n+e.state.squareSize*t/2,o.y=a.point.y-(a.point.y-g.mapPadding)%e.state.squareSize-n+e.state.squareSize*t/2,c.position=o},o.onMouseDown=function(o){e.isEditableArea(o.point)&&e.draw(o,t,n,a)},o.onMouseDrag=function(o){e.isEditableArea(o.point)&&e.draw(o,t,n,a)}}},{key:"draw",value:function(e,t,a,o){h.a.project.layers.drawLayer.activate();var r=new h.a.Point(0,0),i=new h.a.Point(0,0),n=h.a.project.activeLayer.children.brush;r.x=e.point.x-(e.point.x-g.mapPadding)%this.state.squareSize-a,r.y=e.point.y-(e.point.y-g.mapPadding)%this.state.squareSize-a;for(var s=0;s<t;s++)for(var l=0;l<t;l++){var c=new h.a.Shape.Rectangle({x:r.x+s*this.state.squareSize,y:r.y+l*this.state.squareSize,width:this.state.squareSize,height:this.state.squareSize});n.position=[r.x+t*this.state.squareSize/2,r.y+t*this.state.squareSize/2],i.x=r.x+s*this.state.squareSize+this.state.squareSize/2,i.y=r.y+l*this.state.squareSize+this.state.squareSize/2;var m=h.a.project.layers[2].hitTest(i,{fill:!0});m&&"brush"!==m.item.name&&m.item.remove(),c.fillColor=o[Math.floor(Math.random()*o.length)]}}},{key:"handleBuildAndPlant",value:function(){var e=this;h.a.project.layers.buildLayer.activate();var t,a=new h.a.Tool;a.activate();var o,r,i,n=!0,s=!1,l=this.state.currentTool,c=this.state.currentModeData.tools.find((function(e){if(e.tool===l)return e})),m=c.items.find((function(t){if(t.item===e.state.currentItem)return t}));if("build"===this.state.currentMode?(t=m.size,o=new h.a.Shape.Rectangle({x:0,y:0,width:t[0]*this.state.squareSize,height:t[1]*this.state.squareSize}),"b45"!==this.state.currentItem&&"b135"!==this.state.currentItem||(o.size=[2*this.state.squareSize,4*this.state.squareSize],o.rotate(parseInt(this.state.currentItem.replace("b","")))),o.fillColor=m.color?m.color:c.color,o.strokeColor=g.strokeColorBilding,i=new h.a.Group([o])):"plant"===this.state.currentMode&&(t=c.size,r=new h.a.Shape.Rectangle({x:0,y:0,width:t[0]*this.state.squareSize,height:t[1]*this.state.squareSize}),i=new h.a.Group([r]),"tree"===this.state.currentTool?((o=new h.a.Shape.Circle(new h.a.Point(t[0]*this.state.squareSize/2,t[1]*this.state.squareSize/2),t[0]*this.state.squareSize*.7/2)).fillColor=m.color?m.color:c.color,o.strokeColor=g.strokeColorPlant,o.opacity=.5):"flower"===this.state.currentTool&&((o=new h.a.Shape.Circle(new h.a.Point(t[0]*this.state.squareSize/2,t[1]*this.state.squareSize/2),t[0]*this.state.squareSize/2)).fillColor=m.item,o.strokeColor=g.strokeColorPlant),i.addChild(o)),m.image&&"bridge"!==c.tool&&"slope"!==c.tool){console.log("here");var u=new h.a.Raster("/lazy-island-planner/"+m.image);u.opacity=0;var d=this.state.squareSize,p="tree"===l?1:2.8;u.onLoad=function(){console.log(u),u.size=new h.a.Size(u.width*d*p/u.height,d*p),u.position=i.position,u.locked=!0,u.opacity=1,i.addChild(u)}}var v=new h.a.Shape.Circle({center:[i.bounds.size._width,0],radius:.8*this.state.squareSize});v.fillColor="#555";var f=new h.a.PointText(new h.a.Point(i.bounds.size._width-(1.6*this.state.squareSize-6)/2,(1.6*this.state.squareSize-6)/2));f.fillColor="#eee",f.content="\xd7",f.locked=!0;var y=new h.a.Group([v,f]);y.name="deletBtn",y.opacity=0,y.locked=!0;var b=new h.a.Group([i,y]);b.position=[-1*g.hideDist,-1*g.hideDist],a.onMouseMove=function(t){n&&(b.position.x=e.getSnapPoint(t.point.x,!0,b),b.position.y=e.getSnapPoint(t.point.y,!1,b))},a.onMouseDown=function(t){if(n)b.position.x=e.getSnapPoint(t.point.x,!0,b),b.position.y=e.getSnapPoint(t.point.y,!1,b),n=!1,b.data.built=!0;else{h.a.project.activeLayer.children.forEach((function(e){e.children.deletBtn.opacity=0}));var a=h.a.project.layers.buildLayer.hitTest(t.point,{fill:!0,tolerance:1});if(!a)return void(s=!1);"deletBtn"!==a.item.parent.name?(b=a.item.parent.parent,s=!0,b.children.deletBtn.opacity=1,b.children.deletBtn.locked=!1):a.item.parent.parent.remove()}},a.onMouseDrag=function(t){s&&(b.position.x=e.getSnapPoint(t.point.x,!0,b),b.position.y=e.getSnapPoint(t.point.y,!1,b))},a.onMouseUp=function(t){e.setState({currentItem:null}),document.querySelectorAll("button.item").forEach((function(e){e.blur()}))}}},{key:"getSnapPoint",value:function(e,t,a){return t?e-(e-a.bounds._width/2-g.mapPadding)%this.state.squareSize:e-(e-a.bounds._height/2-g.mapPadding)%this.state.squareSize}},{key:"clearBrushHover",value:function(){h.a.project.layers.drawLayer.children.brush&&h.a.project.layers.drawLayer.children.brush.remove()}},{key:"clearNotBuiltItem",value:function(){var e=h.a.project.layers.buildLayer.children[h.a.project.layers.buildLayer.children.length-1];e&&!e.data.built&&e.remove()}},{key:"render",value:function(){var e=this;return this.state.isImgUploaded?c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"editor"},c.a.createElement("aside",{className:"tool-aside"},c.a.createElement("div",{className:"modes"},c.a.createElement(f,{toolData:p.toolData,currentMode:this.state.currentMode,onClick:this.changeMode})),c.a.createElement("div",{className:"tools"},c.a.createElement(y,{currentTool:this.state.currentTool,currentModeData:this.state.currentModeData,onClick:this.changeTool}),c.a.createElement(b,{currentMode:this.state.currentMode,currentModeData:this.state.currentModeData,currentTool:this.state.currentTool,currentItem:this.state.currentItem,onClick:this.changeItem,customColor:this.state.customColor,changeColor:this.changeColor}))),c.a.createElement("canvas",{id:"canvas",ref:this.canvas}),c.a.createElement("aside",{className:"sub-aside"},c.a.createElement(w.a,null,(function(t,a){a.i18n;return c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("button",{type:"button",title:t("Info"),onClick:e.openModal},c.a.createElement("img",{src:"/lazy-island-planner/icon_question.svg",alt:t("Info")}))),c.a.createElement("li",null,c.a.createElement("button",{type:"button",title:t("Download map"),onClick:e.downLoadCanvas},c.a.createElement("img",{src:"/lazy-island-planner/icon_download.svg",alt:t("Download map")}))))})))),c.a.createElement(w.a,null,(function(t,a){a.i18n;return c.a.createElement("div",{id:"info-modal"},c.a.createElement("button",{className:"close-modal round",onClick:e.closeModal},"\xd7"),c.a.createElement("h1",null,c.a.createElement("div",null,"Lazy Island Planner")),c.a.createElement("p",null,t("This is a very simple tool"),c.a.createElement("strong",null,t("No undo"),t("No save"))),c.a.createElement("p",null,t("You can try other great tools")),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("a",{href:"https://eugeneration.github.io/HappyIslandDesigner/",target:"_blank"},"Happy Island Designer")),c.a.createElement("li",null,c.a.createElement("a",{href:"https://bobacupcake.itch.io/island-planner",target:"_blank"},"Island Planner"))),c.a.createElement("button",{className:"btn close-modal",onClick:e.closeModal},t("Close")))}))):c.a.createElement("div",{className:"intro"},c.a.createElement("h1",null,c.a.createElement("div",null,"Lazy Island Planner")),c.a.createElement("div",{className:"lang-menu"},c.a.createElement("button",{name:"zh-TW",className:"zh-TW"===this.state.language||"zh"===this.state.language?"active":"",onClick:this.changeLanguage},"\u53f0\u7063\u83ef\u8a9e"),c.a.createElement("button",{name:"en",className:"zh-TW"!==this.state.language&&"zh"!==this.state.language&&"ja"!==this.state.language?"active":"",onClick:this.changeLanguage},"English"),c.a.createElement("button",{name:"ja",className:"ja"===this.state.language?"active":"",onClick:this.changeLanguage},"\u65e5\u672c\u8a9e")),c.a.createElement(w.a,null,(function(t,a){a.i18n;return c.a.createElement("div",null,c.a.createElement("p",null,t("This is a simple tool for Animal Crossing")),c.a.createElement("p",null,t("Upload your map screenshot to start"),t("or you can"),c.a.createElement("button",{className:"link",id:"mapUseDefault",onClick:e.loadMapFromUrl},t("try with my map")),t("period")))})),c.a.createElement("img",{src:z.a,alt:"Map sample",className:"island-map"}),c.a.createElement(w.a,null,(function(t,a){a.i18n;return c.a.createElement("form",null,c.a.createElement("input",{type:"file",accept:"image/.jpg, .jpeg",id:"img-input",onChange:e.upLoadImg}),c.a.createElement("label",{htmlFor:"img-input",className:"btn fake-input"},t("Upload image")),c.a.createElement("div",{id:"img-input-error",className:"error-message"},t("Sorry this seems not a correct map image")),c.a.createElement("div",{className:"or"},t("or")),c.a.createElement("div",{className:"use-url"},c.a.createElement("label",null,t("Use the URL of uploaded image")),c.a.createElement("input",{type:"text",ref:e.urlInput}),c.a.createElement("button",{type:"button",id:"mapFromUrl",onClick:e.loadMapFromUrl},t("Confirm"))),c.a.createElement("div",{id:"url-error",className:"error-message"},t("Sorry this seems not a correct map image url")))})))}}]),a}(c.a.Component);u.a.render(c.a.createElement(P,null),document.getElementById("root"))},6:function(e){e.exports=JSON.parse('{"toolData":[{"mode":"draw","image":"icon_draw.svg","tools":[{"tool":"brush-S","image":"icon_brush-S.svg","size":1},{"tool":"brush-M","image":"icon_brush-M.svg","size":2},{"tool":"brush-L","image":"icon_brush-L.svg","size":3}],"colors":[{"colorName":"colorG1","image":"icon_colorG1.jpg","color":["#3c783b","#437c42","#3d783c","#417a40","#458042"]},{"colorName":"colorG2","image":"icon_colorG2.jpg","color":["#42a140","#49a646","#40a03e","#44a63f","#4fa544"]},{"colorName":"colorG3","image":"icon_colorG3.jpg","color":["#5dc549","#5fc647","#5bc746","#6ecd51","#5cc746"]},{"colorName":"colorSand","image":"icon_colorSand.jpg","color":["#f0e8a7","#ece5a2","#ede7a6","#ebe6a1","#eee8b4"]},{"colorName":"colorWater","image":"icon_colorWater.jpg","color":["#78d4c3","#7bd8c3","#7dd9c0","#79d6c1","#76d5c3"]},{"colorName":"colorRock","image":"icon_colorRock.jpg","color":["#6e7484","#818793","#6e7689","#6f7684","#747788"]},{"colorName":"colorCustom","image":"icon_palette.svg","color":["#b0a07c"]}]},{"mode":"build","image":"icon_build.svg","tools":[{"tool":"building","image":"icon_building.svg","color":"#544f40","items":[{"item":"home","image":"icon_home.svg","size":[5,4],"color":"#f784ae"},{"item":"house","image":"icon_house.svg","size":[4,4],"color":"#f8b616"},{"item":"store","image":"icon_store.svg","size":[7,4]},{"item":"apparel","image":"icon_apparel.svg","size":[5,4]},{"item":"museum","image":"icon_museum.svg","size":[7,4]},{"item":"infoCenter","image":"icon_infoCenter.svg","size":[12,10]},{"item":"camp","image":"icon_camp.svg","size":[4,4]},{"item":"airPort","image":"icon_airport.svg","size":[8,8]}]},{"tool":"bridge","image":"icon_bridge.svg","color":"#847f64","items":[{"item":"b0","image":"icon_b0.svg","size":[4,2]},{"item":"b90","image":"icon_b90.svg","size":[2,4]},{"item":"b45","image":"icon_b45.svg","size":[6,6]},{"item":"b135","image":"icon_b135.svg","size":[6,6]}]},{"tool":"slope","image":"icon_slope.svg","color":"#edda96","items":[{"item":"s0","image":"icon_s0.svg","size":[4,2]},{"item":"s90","image":"icon_s90.svg","size":[2,4]}]}]},{"mode":"plant","image":"icon_plant.svg","tools":[{"tool":"tree","image":"icon_tree.svg","color":"#00b27a","size":[3,3],"items":[{"item":"broadleaf"},{"item":"conifer","color":"#12560c"},{"item":"apple","image":"icon_apple.svg"},{"item":"cherry","image":"icon_cherry.svg"},{"item":"coconut","image":"icon_coconut.svg"},{"item":"orange","image":"icon_orange.svg"},{"item":"pear","image":"icon_pear.svg"},{"item":"peach","image":"icon_peach.svg"},{"item":"bamboo","image":"icon_bamboo.svg","color":"#c7ea7b"}]},{"tool":"flower","image":"icon_flower.svg","color":"#fff","size":[1,1],"items":[{"item":"red"},{"item":"yellow"},{"item":"white"},{"item":"orange"},{"item":"pink"},{"item":"purple"},{"item":"black"}]}]}]}')}},[[23,1,2]]]);
//# sourceMappingURL=main.b952f107.chunk.js.map